<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>{{ title }}</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <script src="/static/js/jquery-3.2.1.min.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="jumbotron">
        <h1>Automatic website update</h1>
        <p>In order to pull the Github repository and update the website files, use the <em>Update from Github</em> button. The <em>Update from Zotero</em> allows to fetch a new publication list from the Zotero group, but changes will appear on the website only with the next update from Github. Please do not run both actions simultaneously.</p>
        <br>
        <div class="text-center">
        <p>
        <button class="btn btn-primary" onclick="runZotero()">Update from Zotero</button>
        <button class="btn btn-primary" onclick="runPush()">Update from Github</button>
        <br><br>
        <pre id="log"><p><code></code></p></pre>
      </div>
      </div>
    </div>

    <script>
      $('#log').load('/_log');

      $('button').click(function() {
        $(this).toggleClass('btn-warning');
      });

      $(document).ready(function() {
        setInterval(function() {
          if ( document.hasFocus() ) {
            $('#log').load('/_log');
          }
        }, 1000 );
      });

      function runZotero() {
        $.get("/zotero");
      };

      function runPush() {
        $.get("/push");
      };
    </script>

  </body>
</html>
